<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>生成複雜 QR Code 網址</title>
    <!-- 引入 QR Code 生成庫 -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
</head>
<body>
    <h1>生成複雜 QR Code 網址</h1>
    <button onclick="generateComplexUrl()">點我生成複雜 QR Code</button>
    <p id="result">點擊按鈕後，這裡會顯示網址</p>
    <div id="qrcode"></div>

    <script>
        function generateComplexUrl() {
            const timestamp = Date.now();
            // 基本網址
            const baseUrl = `https://alanp27.github.io/qrtest/scan.html?timestamp=${timestamp}`;
            // 增加填充內容，讓網址變長到約 200 字符（達到 Version 9）
            const padding = "x".repeat(150) + "end";
            const complexUrl = `${baseUrl}&data=${padding}`;
            
            // 顯示生成的網址
            document.getElementById('result').innerHTML = complexUrl;
            console.log("Generated URL:", complexUrl);

            // 生成 QR Code
            QRCode.toCanvas(document.getElementById('qrcode'), complexUrl, { 
                width: 200,
                errorCorrectionLevel: 'H' // 高錯誤校正，確保掃描穩定
            }, function(error) {
                if (error) console.error(error);
            });
        }
    </script>
</body>
</html>
